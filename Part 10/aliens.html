<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Alien's Are Gonna Kill Me!</title>
  <script src="../../jsgame0.js"></script>
  <script id="level" type="application/json">
[
  {
    "structure": [
      [0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
      [1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
      [0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
      [1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
      [0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
      [1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
      [0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
      [1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
      [0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
      [1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
      [0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
      [1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
      [0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    ],
    "interval": 4
  },
  {
    "structure": [
      [0, 0, 0, 0, 0, 1, 1, 1, 1, 1],
      [1, 1, 1, 1, 1, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 1, 1, 1, 1, 1],
      [1, 1, 1, 1, 1, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 1, 1, 1, 1, 1],
      [1, 1, 1, 1, 1, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 1, 1, 1, 1, 1],
      [1, 1, 1, 1, 1, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 1, 1, 1, 1, 1],
      [1, 1, 1, 1, 1, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 1, 1, 1, 1, 1],
      [1, 1, 1, 1, 1, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    ],
    "interval": 5
  },
  {
    "structure": [
      [0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
      [1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
      [0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
      [1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
      [0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
      [1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
      [0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
      [1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
      [0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
      [1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
      [0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
      [1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
      [0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    ],
    "interval": 4
  },
  {
    "structure": [
      [1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 1, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 1, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
      [0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
      [0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
      [0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
      [0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
      [0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
      [0, 0, 0, 1, 0, 0, 0, 0, 0, 0],
      [0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
      [0, 1, 0, 0, 0, 0, 0, 0, 0, 0],
      [1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 1, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 1, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
      [0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
      [0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
      [0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
      [0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
      [0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
      [0, 0, 0, 1, 0, 0, 0, 0, 0, 0],
      [0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
      [0, 1, 0, 0, 0, 0, 0, 0, 0, 0],
      [1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 1, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 1, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
      [0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
      [0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
      [0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
      [0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
      [0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
      [0, 0, 0, 1, 0, 0, 0, 0, 0, 0],
      [0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
      [0, 1, 0, 0, 0, 0, 0, 0, 0, 0],
      [1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    ],
    "interval": 4
  },
  {
    "structure": [
      [0, 0, 0, 0, 1, 1, 0, 0, 0, 0],
      [0, 0, 0, 1, 0, 0, 1, 0, 0, 0],
      [0, 0, 1, 0, 0, 0, 0, 1, 0, 0],
      [0, 1, 0, 0, 0, 0, 0, 0, 1, 0],
      [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
      [0, 1, 0, 0, 0, 0, 0, 0, 1, 0],
      [0, 0, 1, 0, 0, 0, 0, 1, 0, 0],
      [0, 0, 0, 1, 0, 0, 1, 0, 0, 0],
      [0, 0, 0, 0, 1, 1, 0, 0, 0, 0],
      [0, 0, 0, 1, 0, 0, 1, 0, 0, 0],
      [0, 0, 1, 0, 0, 0, 0, 1, 0, 0],
      [0, 1, 0, 0, 0, 0, 0, 0, 1, 0],
      [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
      [0, 1, 0, 0, 0, 0, 0, 0, 1, 0],
      [0, 0, 1, 0, 0, 0, 0, 1, 0, 0],
      [0, 0, 0, 1, 0, 0, 1, 0, 0, 0],
      [0, 0, 0, 0, 1, 1, 0, 0, 0, 0],
      [0, 0, 0, 1, 0, 0, 1, 0, 0, 0],
      [0, 0, 1, 0, 0, 0, 0, 1, 0, 0],
      [0, 1, 0, 0, 0, 0, 0, 0, 1, 0],
      [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
      [0, 1, 0, 0, 0, 0, 0, 0, 1, 0],
      [0, 0, 1, 0, 0, 0, 0, 1, 0, 0],
      [0, 0, 0, 1, 0, 0, 1, 0, 0, 0],
      [0, 0, 0, 0, 1, 1, 0, 0, 0, 0],
      [0, 0, 0, 1, 0, 0, 1, 0, 0, 0],
      [0, 0, 1, 0, 0, 0, 0, 1, 0, 0],
      [0, 1, 0, 0, 0, 0, 0, 0, 1, 0],
      [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
      [0, 1, 0, 0, 0, 0, 0, 0, 1, 0],
      [0, 0, 1, 0, 0, 0, 0, 1, 0, 0],
      [0, 0, 0, 1, 0, 0, 1, 0, 0, 0],
      [0, 0, 0, 0, 1, 1, 0, 0, 0, 0],
      [0, 0, 0, 1, 0, 0, 1, 0, 0, 0],
      [0, 0, 1, 0, 0, 0, 0, 1, 0, 0],
      [0, 1, 0, 0, 0, 0, 0, 0, 1, 0],
      [1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
      [0, 1, 0, 0, 0, 0, 0, 0, 1, 0],
      [0, 0, 1, 0, 0, 0, 0, 1, 0, 0],
      [0, 0, 0, 1, 0, 0, 1, 0, 0, 0],
      [0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
    ],
    "interval": 3
  }
]
  </script>
  <style type="text/css" media="screen">
body {
  background-color: white;
  color: black;
}
.hidden {
  display: none;
}
#original {
  margin-left: 1em;
}
  </style>
</head>

<body>
<section id="imageLoader" class="hidden">
  <img class="hidden" src="images/background.png" alt="background" data-name="background">
  <img class="hidden" src="images/final_level.png" alt="final_level" data-name="final_level">
  <img class="hidden" src="images/lose_screen.png" alt="lose_screen" data-name="lose_screen">
  <img class="hidden" src="images/next_level.png" alt="next_level" data-name="next_level">
  <img class="hidden" src="images/shield1.png" alt="shield1" data-name="shield1">
  <img class="hidden" src="images/shield2.png" alt="shield2" data-name="shield2">
  <img class="hidden" src="images/start_screen.png" alt="start_screen" data-name="start_screen">
  <img class="hidden" src="images/them_pellet.png" alt="them_pellet" data-name="them_pellet">
  <img class="hidden" src="images/them_ship.png" alt="them_ship" data-name="them_ship">
  <img class="hidden" src="images/win_screen.png" alt="win_screen" data-name="win_screen">
  <img class="hidden" src="images/you_pellet.png" alt="you_pellet" data-name="you_pellet">
  <img class="hidden" src="images/you_ship.png" alt="you_ship" data-name="you_ship">
</section>
<section id="soundLoader" class="hidden">
  <audio class="hidden" controls preload="auto" src="sounds/enemy_laser.wav" data-name="enemy_laser">Your browser does not support the audio element.</audio>
  <audio class="hidden" controls preload="auto" src="sounds/player_laser.wav" data-name="player_laser">Your browser does not support the audio element.</audio>
</section>

<main>
<h1>Alien's Are Gonna Kill Me!</h1>

<canvas id="screen">
The game screen appears here if your browser supports the Canvas API.
</canvas>
<section id="controls">
  <button type="button" id="reset">Reset</button>
  <button type="button" id="pause">Pause</button>
</section>

<h2>Attribution</h2>

<p><a href="https://magpi.raspberrypi.com/books/essentials-games-vol1">Essentials - Make Games with Python, pages 130 - 152</a>.</p>

<p>Licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/legalcode">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported</a>.</p>

<h2>Original Python code</h2>

<pre id="original"><code>
import pygame, sys, random, math
import pygame.locals as GAME_GLOBALS
import pygame.event as GAME_EVENTS
import pygame.time as GAME_TIME

class Bullet():

  x = 0
  y = 0
  image = None
  pygame = None
  surface = None
  width = 0
  height = 0
  speed = 0.0

  def loadImages(self):
    self.image = self.pygame.image.load(self.image)

  def draw(self):
    self.surface.blit(self.image, (self.x, self.y))

  def move(self):
    self.y += self.speed

  def checkForHit(self, thingToCheckAgainst):
    if self.x &gt; thingToCheckAgainst.x and self.x &lt; thingToCheckAgainst.x + thingToCheckAgainst.width:
      if self.y &gt; thingToCheckAgainst.y and self.y &lt; thingToCheckAgainst.y + thingToCheckAgainst.height:
        thingToCheckAgainst.registerHit()
        return True

    return False

  def __init__(self, x, y, pygame, surface, speed, image):
    self.x = x
    self.y = y
    self.pygame = pygame
    self.surface = surface
    self.image = image
    self.loadImages()
    self.speed = speed

    dimensions = self.image.get_rect().size
    self.width = dimensions[0]
    self.height = dimensions[1]

    self.x -= self.width / 2

class Player():

  x = 0
  y = 0
  firing = False
  image = None
  shieldImage = None
  drawShield = False
  soundEffect = &#x27;sounds/player_laser.wav&#x27;
  pygame = None
  surface = None
  width = 0
  height = 0
  bullets = []
  bulletImage = &quot;assets/you_pellet.png&quot;
  bulletSpeed = -10
  health = 5
  maxHealth = health
  shields = 3
  maxShields = shields

  def loadImages(self):
    self.image = self.pygame.image.load(&quot;assets/you_ship.png&quot;)
    self.shieldImage = self.pygame.image.load(&quot;assets/shield2.png&quot;)

  def draw(self):
    self.surface.blit(self.image, (self.x, self.y))
    if self.drawShield == True:
      self.surface.blit(self.shieldImage, (self.x - 3, self.y - 2))
      self.drawShield = False

  def setPosition(self, pos):
    self.x = pos[0] - self.width / 2

  def fire(self):
    self.bullets.append(Bullet(self.x + self.width / 2, self.y, self.pygame, self.surface, self.bulletSpeed, self.bulletImage))
    a = self.pygame.mixer.Sound(self.soundEffect)
    a.set_volume(0.2)
    a.play()

  def drawBullets(self):
    for b in self.bullets:
      b.move()
      b.draw()

  def registerHit(self):
    if self.shields == 0:
      self.health -= 1
    else :
      self.shields -= 1
      self.drawShield = True

  def checkForHit(self, thingToCheckAgainst):
    bulletsToRemove = []

    for idx, b in enumerate(self.bullets):
      if b.x &gt; thingToCheckAgainst.x and b.x &lt; thingToCheckAgainst.x + thingToCheckAgainst.width:
        if b.y &gt; thingToCheckAgainst.y and b.y &lt; thingToCheckAgainst.y + thingToCheckAgainst.height:
          thingToCheckAgainst.registerHit()
          bulletsToRemove.append(idx)
    bC = 0
    for usedBullet in bulletsToRemove:
      del self.bullets[usedBullet - bC]
      bC += 1

    if thingToCheckAgainst.health &lt;= 0:
      return True

  def __init__(self, x, y, pygame, surface):
    self.x = x
    self.y = y
    self.pygame = pygame
    self.surface = surface
    self.loadImages()

    dimensions = self.image.get_rect().size
    self.width = dimensions[0]
    self.height = dimensions[1]

    self.x -= self.width / 2
    self.y -= self.height + 10

class Enemy(Player):

  x = 0
  y = 0
  firing = False
  image = None
  soundEffect = &#x27;sounds/enemy_laser.wav&#x27;
  bulletImage = &quot;assets/them_pellet.png&quot;
  bulletSpeed = 10
  speed = 4
  shields = 0

  def move(self):
    self.y += self.speed

  def tryToFire(self):
    shouldFire = random.random()

    if shouldFire &lt;= 0.01:
      self.fire()

  def loadImages(self):
    self.image = self.pygame.image.load(&quot;assets/them_ship.png&quot;)

  def __init__(self, x, y, pygame, surface, health):
    self.x = x
    self.y = y
    self.pygame = pygame
    self.surface = surface
    self.loadImages()
    self.bullets = []
    self.health = health

    dimensions = self.image.get_rect().size
    self.width = dimensions[0]
    self.height = dimensions[1]

    self.x += self.width / 2

level = [
	{
		&quot;structure&quot; :[  [0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
						[1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
						[0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
						[1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
						[0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
						[1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
						[0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
						[1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
						[0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
						[1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
						[0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
						[1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
						[0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
						[0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
						[0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
						[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
					],
		&quot;interval&quot; : 4
	},
	{
		&quot;structure&quot; :[  [0, 0, 0, 0, 0, 1, 1, 1, 1, 1],
						[1, 1, 1, 1, 1, 0, 0, 0, 0, 0],
						[0, 0, 0, 0, 0, 1, 1, 1, 1, 1],
						[1, 1, 1, 1, 1, 0, 0, 0, 0, 0],
						[0, 0, 0, 0, 0, 1, 1, 1, 1, 1],
						[1, 1, 1, 1, 1, 0, 0, 0, 0, 0],
						[0, 0, 0, 0, 0, 1, 1, 1, 1, 1],
						[1, 1, 1, 1, 1, 0, 0, 0, 0, 0],
						[0, 0, 0, 0, 0, 1, 1, 1, 1, 1],
						[1, 1, 1, 1, 1, 0, 0, 0, 0, 0],
						[0, 0, 0, 0, 0, 1, 1, 1, 1, 1],
						[1, 1, 1, 1, 1, 0, 0, 0, 0, 0],
						[0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
						[0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
						[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
					],
		&quot;interval&quot; : 5
	},
	{
		&quot;structure&quot; :[  [0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
						[1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
						[0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
						[1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
						[0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
						[1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
						[0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
						[1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
						[0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
						[1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
						[0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
						[1, 0, 1, 0, 1, 0, 1, 0, 1, 0],
						[0, 1, 0, 1, 0, 1, 0, 1, 0, 1],
						[0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
						[0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
						[0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
						[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
					],
		&quot;interval&quot; : 4
	},
	{
		&quot;structure&quot; :[  [1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
						[0, 1, 0, 0, 0, 0, 0, 0, 0, 0],
						[0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
						[0, 0, 0, 1, 0, 0, 0, 0, 0, 0],
						[0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
						[0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
						[0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
						[0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
						[0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
						[0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
						[0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
						[0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
						[0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
						[0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
						[0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
						[0, 0, 0, 1, 0, 0, 0, 0, 0, 0],
						[0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
						[0, 1, 0, 0, 0, 0, 0, 0, 0, 0],
						[1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
						[0, 1, 0, 0, 0, 0, 0, 0, 0, 0],
						[0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
						[0, 0, 0, 1, 0, 0, 0, 0, 0, 0],
						[0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
						[0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
						[0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
						[0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
						[0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
						[0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
						[0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
						[0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
						[0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
						[0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
						[0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
						[0, 0, 0, 1, 0, 0, 0, 0, 0, 0],
						[0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
						[0, 1, 0, 0, 0, 0, 0, 0, 0, 0],
						[1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
						[0, 1, 0, 0, 0, 0, 0, 0, 0, 0],
						[0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
						[0, 0, 0, 1, 0, 0, 0, 0, 0, 0],
						[0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
						[0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
						[0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
						[0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
						[0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
						[0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
						[0, 0, 0, 0, 0, 0, 0, 0, 1, 0],
						[0, 0, 0, 0, 0, 0, 0, 1, 0, 0],
						[0, 0, 0, 0, 0, 0, 1, 0, 0, 0],
						[0, 0, 0, 0, 0, 1, 0, 0, 0, 0],
						[0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
						[0, 0, 0, 1, 0, 0, 0, 0, 0, 0],
						[0, 0, 1, 0, 0, 0, 0, 0, 0, 0],
						[0, 1, 0, 0, 0, 0, 0, 0, 0, 0],
						[1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
						[0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
						[0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
						[0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
						[0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
					],
		&quot;interval&quot; : 4
	},
	{
		&quot;structure&quot; :[  [0, 0, 0, 0, 1, 1, 0, 0, 0, 0],
						[0, 0, 0, 1, 0, 0, 1, 0, 0, 0],
						[0, 0, 1, 0, 0, 0, 0, 1, 0, 0],
						[0, 1, 0, 0, 0, 0, 0, 0, 1, 0],
						[1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
						[0, 1, 0, 0, 0, 0, 0, 0, 1, 0],
						[0, 0, 1, 0, 0, 0, 0, 1, 0, 0],
						[0, 0, 0, 1, 0, 0, 1, 0, 0, 0],
						[0, 0, 0, 0, 1, 1, 0, 0, 0, 0],
						[0, 0, 0, 1, 0, 0, 1, 0, 0, 0],
						[0, 0, 1, 0, 0, 0, 0, 1, 0, 0],
						[0, 1, 0, 0, 0, 0, 0, 0, 1, 0],
						[1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
						[0, 1, 0, 0, 0, 0, 0, 0, 1, 0],
						[0, 0, 1, 0, 0, 0, 0, 1, 0, 0],
						[0, 0, 0, 1, 0, 0, 1, 0, 0, 0],
						[0, 0, 0, 0, 1, 1, 0, 0, 0, 0],
						[0, 0, 0, 1, 0, 0, 1, 0, 0, 0],
						[0, 0, 1, 0, 0, 0, 0, 1, 0, 0],
						[0, 1, 0, 0, 0, 0, 0, 0, 1, 0],
						[1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
						[0, 1, 0, 0, 0, 0, 0, 0, 1, 0],
						[0, 0, 1, 0, 0, 0, 0, 1, 0, 0],
						[0, 0, 0, 1, 0, 0, 1, 0, 0, 0],
						[0, 0, 0, 0, 1, 1, 0, 0, 0, 0],
						[0, 0, 0, 1, 0, 0, 1, 0, 0, 0],
						[0, 0, 1, 0, 0, 0, 0, 1, 0, 0],
						[0, 1, 0, 0, 0, 0, 0, 0, 1, 0],
						[1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
						[0, 1, 0, 0, 0, 0, 0, 0, 1, 0],
						[0, 0, 1, 0, 0, 0, 0, 1, 0, 0],
						[0, 0, 0, 1, 0, 0, 1, 0, 0, 0],
						[0, 0, 0, 0, 1, 1, 0, 0, 0, 0],
						[0, 0, 0, 1, 0, 0, 1, 0, 0, 0],
						[0, 0, 1, 0, 0, 0, 0, 1, 0, 0],
						[0, 1, 0, 0, 0, 0, 0, 0, 1, 0],
						[1, 0, 0, 0, 0, 0, 0, 0, 0, 1],
						[0, 1, 0, 0, 0, 0, 0, 0, 1, 0],
						[0, 0, 1, 0, 0, 0, 0, 1, 0, 0],
						[0, 0, 0, 1, 0, 0, 1, 0, 0, 0],
						[0, 0, 0, 0, 1, 1, 0, 0, 0, 0]
					],
		&quot;interval&quot; : 3
	}
]

windowWidth = 1024
windowHeight = 614
timeTick = 0

pygame.init()
pygame.font.init()
clock = pygame.time.Clock()
surface = pygame.display.set_mode((windowWidth, windowHeight), pygame.FULLSCREEN|pygame.HWSURFACE|pygame.DOUBLEBUF)

pygame.display.set_caption(&#x27;Alien\&#x27;s Are Gonna Kill Me!&#x27;)
textFont = pygame.font.SysFont(&quot;monospace&quot;, 50)

gameStarted = False
gameStartedTime = 0
gameFinishedTime = 0
gameOver = False
gameWon = False

currentLevel = 0
currentWave = 0
lastSpawn = 0
nextLevelTS = 0

#Mouse Variables
mousePosition = (0,0)
mouseStates = None
mouseDown = False

#Image Variables
startScreen = pygame.image.load(&quot;assets/start_screen.png&quot;)
background = pygame.image.load(&quot;assets/background.png&quot;)
loseScreen = pygame.image.load(&quot;assets/lose_screen.png&quot;)
winScreen = pygame.image.load(&quot;assets/win_screen.png&quot;)
nextWave = pygame.image.load(&quot;assets/next_level.png&quot;)
finalWave = pygame.image.load(&quot;assets/final_level.png&quot;)

#Ships
ship = Player(windowWidth / 2, windowHeight, pygame, surface)
enemyShips = []

leftOverBullets = []

#Sound Setup
pygame.mixer.init()

def launchWave():

  global lastSpawn, currentWave, currentLevel, gameOver, gameWon, nextLevelTS

  thisLevel = level[currentLevel][&quot;structure&quot;]

  if currentWave &lt; len(thisLevel):

    thisWave = thisLevel[currentWave]

    for idx, enemyAtThisPosition in enumerate(thisWave):
      if enemyAtThisPosition is 1:
        enemyShips.append(Enemy(((windowWidth / len(thisWave)) * idx), -60, pygame, surface, 1))

  elif currentLevel + 1 &lt; len(level) :
    currentLevel += 1
    currentWave = 0
    ship.shields = ship.maxShields
    nextLevelTS = timeTick + 5000
  else:
    gameWon = True

  lastSpawn = timeTick
  currentWave += 1

def updateGame():

  global mouseDown, gameOver, gameWon, leftOverBullets

  if mouseStates[0] is 1 and mouseDown is False:
    ship.fire()
    mouseDown = True
  elif mouseStates[0] is 0 and mouseDown is True:
    mouseDown = False

  ship.setPosition(mousePosition)

  enemiesToRemove = []

  for idx, enemy in enumerate(enemyShips):

    if enemy.y &lt; windowHeight:
      enemy.move()
      enemy.tryToFire()
      shipIsDestroyed = enemy.checkForHit(ship)
      enemyIsDestroyed = ship.checkForHit(enemy)

      if enemyIsDestroyed is True:
        enemiesToRemove.append(idx)

      if shipIsDestroyed is True:
        gameOver = True
        gameWon = False
        return

    else:
      enemiesToRemove.append(idx)

  oC = 0

  for idx in enemiesToRemove:
    for remainingBullets in enemyShips[idx - oC].bullets:
      leftOverBullets.append(remainingBullets)

    del enemyShips[idx - oC]
    oC += 1

  oC = 0

  for idx, aBullet in enumerate(leftOverBullets):
      aBullet.move()
      hitShip = aBullet.checkForHit(ship)

      if hitShip is True or aBullet.y &gt; windowHeight:
        del leftOverBullets[idx - oC]
        oC += 1

def drawGame():

    global leftOverBullets, nextLevelTS, timeTick, gameWon

    surface.blit(background, (0, 0))
    ship.draw()
    ship.drawBullets()

    for aBullet in leftOverBullets:
      aBullet.draw()

    healthColor = [(62, 180, 76), (180, 62, 62)]
    whichColor = 0

    if(ship.health &lt;= 1):
      whichColor = 1

    for enemy in enemyShips:
      enemy.draw()
      enemy.drawBullets()

    pygame.draw.rect(surface, healthColor[whichColor], (0, windowHeight - 5, (windowWidth / ship.maxHealth) * ship.health, 5))
    pygame.draw.rect(surface, (62, 145, 180), (0, windowHeight - 10, (windowWidth / ship.maxShields) * ship.shields, 5))

    if timeTick &lt; nextLevelTS:
      if gameWon is True:
        surface.blit(finalWave, (250, 150))
      else:
        surface.blit(nextWave, (250, 150))

def restartGame():
  global gameOver, gameStart, currentLevel, currentWave, lastSpawn, nextLevelTS, leftOverBullets, gameWon, enemyShips, ship

  gameOver = False
  gameWon = False
  currentLevel = 0
  currentWave = 0
  lastSpawn = 0
  nextLevelTS = 0
  leftOverBullets = []
  enemyShips = []
  ship.health = ship.maxHealth
  ship.shields = ship.maxShields
  ship.bullets = []

def quitGame():
  pygame.quit()
  sys.exit()

# &#x27;main&#x27; loop
while True:
  timeTick = GAME_TIME.get_ticks()
  mousePosition = pygame.mouse.get_pos()
  mouseStates = pygame.mouse.get_pressed()

  if gameStarted is True and gameOver is False:

    updateGame()
    drawGame()

  elif gameStarted is False and gameOver is False:
    surface.blit(startScreen, (0, 0))

    if mouseStates[0] is 1:

      if mousePosition[0] &gt; 445 and mousePosition[0] &lt; 580 and mousePosition[1] &gt; 450 and mousePosition[1] &lt; 510:
        pygame.mouse.set_visible(False)
        gameStarted = True

    elif mouseStates[0] is 0 and mouseDown is True:
      mouseDown = False

  elif gameStarted is True and gameOver is True and gameWon is False:
    surface.blit(loseScreen, (0, 0))
    timeLasted = (gameFinishedTime - gameStartedTime) / 1000

  if gameStarted is True and gameWon is True and len(enemyShips) is 0:
    surface.blit(winScreen, (0, 0))

  # Handle user and system events
  for event in GAME_EVENTS.get():

    if event.type == pygame.KEYDOWN:

      if event.key == pygame.K_ESCAPE:
        quitGame()

      if event.key == pygame.K_SPACE:
        if gameStarted is True and gameOver is True or gameStarted is True and gameWon is True:
          restartGame()

  if timeTick - lastSpawn &gt; level[currentLevel][&quot;interval&quot;] * 1000 and gameStarted is True and gameOver is False:
    launchWave()

  if event.type == GAME_GLOBALS.QUIT:
    quitGame()

  clock.tick(60)
  pygame.display.update()
</code></pre>
</main>

<script>
WIDTH = 1024;
HEIGHT = 614;
TITLE = "Alien's Are Gonna Kill Me!";

const LEVEL = JSON.parse(document.querySelector('#level').textContent);

/*
 * Return a random integer N such that min <= N < max.
 */
function getRandomInteger(min, max) {
  min = Math.ceil(min);
  max = Math.floor(max);
  return Math.floor((Math.random() * (max - min)) + min);
}

class Bullet {
  constructor(x, y, speed, image) {
    this.x = x;
    this.y = y;
    this.image = image;
    this.speed = speed;

    this.width = images[this.image].width;
    this.height = images[this.image].height;

    this.x -= this.width / 2;
  }

  draw() {
    screen.blit(this.image, [this.x, this.y]);
  }

  move() {
    this.y += this.speed;
  }

  checkForHit(thingToCheckAgainst) {
    if ((this.x > thingToCheckAgainst.x) && (this.x < (thingToCheckAgainst.x + thingToCheckAgainst.width))) {
      if ((this.y > thingToCheckAgainst.y) && (this.y < (thingToCheckAgainst.y + thingToCheckAgainst.height))) {
        thingToCheckAgainst.registerHit();
        return true;
      }
    }

    return false;
  }
}

class Player {
  static IMAGE = "you_ship";
  static SHIELD_IMAGE = "shield2";
  static SOUND_EFFECT = 'player_laser';
  static BULLET_IMAGE = "you_pellet";
  static BULLET_SPEED = -10;
  static MAX_HEALTH = 5;
  static MAX_SHIELDS = 3;

  constructor(x, y) {
    this.x = x;
    this.y = y;

    this.width = images[Player.IMAGE].width;
    this.height = images[Player.IMAGE].height;

    this.x -= this.width / 2;
    this.y -= this.height + 10;

    this.bullets = [];
    this.health = Player.MAX_HEALTH;
    this.shields = Player.MAX_SHIELDS;
    this.drawShield = false;
  }

  draw() {
    screen.blit(Player.IMAGE, [this.x, this.y]);
    if (this.drawShield) {
      screen.blit(Player.SHIELD_IMAGE, [this.x - 3, this.y - 2]);
      this.drawShield = false;
    }
  }

  setPosition(pos) {
    this.x = pos[0] - (this.width / 2);
  }

  fire() {
    this.bullets.push(new Bullet(this.x + (this.width / 2), this.y, Player.BULLET_SPEED, Player.BULLET_IMAGE));
    sounds[Player.SOUND_EFFECT].volume = 0.2;
    sounds[Player.SOUND_EFFECT].play();
  }

  drawBullets() {
    for (let b of this.bullets) {
      b.draw();
    }
  }

  moveBullets() {
    for (let b of this.bullets) {
      b.move();
    }
  }

  registerHit() {
    if (this.shields === 0) {
      this.health -= 1;
    }
    else {
      this.shields -= 1;
      this.drawShield = true;
    }
  }

  checkForHit(thingToCheckAgainst) {
    let bulletsToRemove = [],
        idx = 0,
        bC = 0;

    for (let b of this.bullets) {
      if ((b.x > thingToCheckAgainst.x) && (b.x < (thingToCheckAgainst.x + thingToCheckAgainst.width))) {
        if ((b.y > thingToCheckAgainst.y) && (b.y < (thingToCheckAgainst.y + thingToCheckAgainst.height))) {
          thingToCheckAgainst.registerHit();
          bulletsToRemove.push(idx);
        }
      }
      idx++;
    }

    for (let usedBullet of bulletsToRemove) {
      this.bullets.splice(usedBullet - bC, 1);
      bC += 1;
    }

    if (thingToCheckAgainst.health <= 0) {
      return true;
    }

    return false;
  }
}

class Enemy extends Player {
  static IMAGE = "them_ship";
  static SOUND_EFFECT = 'enemy_laser';
  static BULLET_IMAGE = "them_pellet";
  static BULLET_SPEED = 10;
  static SPEED = 4;

  constructor(x, y, health) {
    super(x, y);

    this.x = x;
    this.y = y;
    this.bullets = [];
    this.health = health;
    this.shields = 0;

    this.width = images[Enemy.IMAGE].width;
    this.height = images[Enemy.IMAGE].height;

    this.x -= this.width / 2;
  }

  draw() {
    screen.blit(Enemy.IMAGE, [this.x, this.y]);
  }

  fire() {
    this.bullets.push(new Bullet(this.x + (this.width / 2), this.y, Enemy.BULLET_SPEED, Enemy.BULLET_IMAGE));
    sounds[Enemy.SOUND_EFFECT].volume = 0.2;
    sounds[Enemy.SOUND_EFFECT].play();
  }

  move() {
    this.y += Enemy.SPEED;
  }

  tryToFire() {
    if (Math.random() <= 0.01) {
      this.fire();
    }
  }
}


var gameStarted, gameTime, gameOver, gameWon, currentLevel, currentWave, lastSpawn, nextLevelTS, ship, enemyShips, leftOverBullets;

function reset() {
  gameStarted = false;
  gameTime = 0;
  gameOver = false;
  gameWon = false;

  currentLevel = 0;
  currentWave = 0;
  lastSpawn = 0;
  nextLevelTS = 0;

  //Ships
  ship = new Player(WIDTH / 2, HEIGHT);
  enemyShips = [];

  leftOverBullets = [];
}

function launchWave() {
  let thisLevel = LEVEL[currentLevel]["structure"],
      thisWave, idx;

  if (currentWave < thisLevel.length) {
    thisWave = thisLevel[currentWave];

    idx = 0;
    for (let enemyAtThisPosition of thisWave) {
      if (enemyAtThisPosition === 1) {
        enemyShips.push(new Enemy((WIDTH / thisWave.length) * idx, -60, 1));
      }
      idx++;
    }
  }

  else if ((currentLevel + 1) < LEVEL.length) {
    currentLevel += 1;
    currentWave = 0;
    ship.shields = Player.MAX_SHIELDS;
    nextLevelTS = 5;
  }
  else {
    gameWon = true;
  }

  lastSpawn = 0;
  currentWave += 1;
}

function update(dt) {
  if (gameStarted && (!gameOver)) {
    gameTime += dt;
    lastSpawn += dt;
    nextLevelTS -= dt;

    ship.moveBullets();

    let enemiesToRemove = [],
        idx = 0,
        shipIsDestroyed, enemyIsDestroyed,
        oC, hitShip;

    for (let enemy of enemyShips) {
      if (enemy.y < HEIGHT) {
        enemy.move();
        enemy.tryToFire();
        shipIsDestroyed = enemy.checkForHit(ship);
        enemyIsDestroyed = ship.checkForHit(enemy);

        if (enemyIsDestroyed) {
          enemiesToRemove.push(idx);
        }

        if (shipIsDestroyed) {
          gameOver = true;
          gameWon = false;
          return;
        }
      }
      else {
        enemiesToRemove.push(idx);
      }

      idx++;
    }

    oC = 0;

    for (let i of enemiesToRemove) {
      for (let remainingBullets of enemyShips[i-oC].bullets) {
        leftOverBullets.push(remainingBullets);
      }

      enemyShips.splice(i - oC, 1);
      oC += 1;
    }

    oC = 0;

    idx = 0;
    for (let aBullet of leftOverBullets) {
      aBullet.move();
      hitShip = aBullet.checkForHit(ship);

      if (hitShip || (aBullet.y > HEIGHT)) {
        leftOverBullets.splice(idx - oC, 1);
        oC += 1;
      }
    }

    for (let enemy of enemyShips) {
      enemy.moveBullets();
    }
  }

  if ((lastSpawn > LEVEL[currentLevel]["interval"]) && gameStarted && (!gameOver)) {
    launchWave();
  }
}

function draw() {
  if (gameStarted && (!gameOver)) {
    screen.blit("background", [0, 0]);
    ship.draw();
    ship.drawBullets();

    for (let aBullet of leftOverBullets) {
      aBullet.draw();
    }

    const healthColor = [[62, 180, 76], [180, 62, 62]];
    let whichColor = 0;

    if (ship.health <= 1) {
      whichColor = 1;
    }

    for (let enemy of enemyShips) {
      enemy.draw();
      enemy.drawBullets();
    }

    screen.draw.filled_rect(new Rect(0, HEIGHT - 5, (WIDTH / Player.MAX_HEALTH) * ship.health, 5), healthColor[whichColor]);
    screen.draw.filled_rect(new Rect(0, HEIGHT - 10, (WIDTH / Player.MAX_SHIELDS) * ship.shields, 5), [62, 145, 180]);

    if (nextLevelTS > 0) {
      if (gameWon) {
        screen.blit("final_level", [250, 150]);
      }
      else {
        screen.blit("next_level", [250, 150]);
      }
    }
  }

  else if ((!gameStarted) && (!gameOver)) {
    screen.blit("start_screen", [0, 0]);
  }

  else if (gameStarted && gameOver && (!gameWon)) {
    screen.blit("lose_screen", [0, 0]);
  }

  if (gameStarted && gameWon && (enemyShips.length === 0)) {
    screen.blit("win_screen", [0, 0]);
  }
}

function on_mouse_down(pos) {
  if (gameStarted && (!gameOver)) {
    ship.fire();
  }

  else if ((!gameStarted) && (!gameOver)) {
    if ((pos[0] > 445) && (pos[0] < 580) && (pos[1] > 450) && (pos[1] < 510)) {
      gameStarted = true;
    }
  }
}

function on_mouse_move(pos) {
  if (gameStarted && (!gameOver)) {
    ship.setPosition(pos);
  }
}

function on_key_down(key) {
  if (key === keys.SPACE) {
    if ((gameStarted && gameOver) || (gameStarted && gameWon)) {
      reset();
    }
  }
}

window.addEventListener('load', (event) => {
  screen.init();
});
</script>
</body>

</html>
